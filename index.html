<!DOCTYPE html>
<html>
	<head>
		<!-- Meta -->
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width">
		<title>Open Mike Eagle</title>
		<meta name="description" content="High quality independent culture machine.">
		<!-- Stylesheet -->
		<link href="css/style.css" rel="stylesheet">
		<link href="css/fonts.css" rel="stylesheet">
		<!-- Font Awesome CDN -->
		<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet">
		<!-- Facebook Open Graph -->
		<meta property="og:url" content="https://mikeeagle.net">
		<meta property="og:type" content="website">
		<meta property="og:title" content="Open Mike Eagle">
		<meta property="og:description" content="High quality independent culture machine.">
		<meta property="og:image" content="https://matthewbeckman.co/images/opengraph.jpg">
		<!-- Twitter Card -->
		<meta name="twitter:card" content="summary_large_image">
		<meta name="twitter:site" content="@mike_eagle">
		<meta name="twitter:title" content="Open Mike Eagle">
		<meta name="twitter:description" content="High quality independent culture machine.">
		<meta name="twitter:image" content="https://matthewbeckman.co/images/twittercard.jpg">
		<!-- temporary font link -->
		<link rel="stylesheet" media="screen" href="https://fontlibrary.org/face/terminal-grotesque" type="text/css"/>
	</head>
	<body>
		<div id="helper_text">
			<span>SHOP</span>
		</div>
		<!-- 3D City Model -->
		<canvas id="city"></canvas>
		<!-- Content Overlay -->
		<h1>Open Mike Eagle</h1>
		<!-- Main Navigation -->
		<div id="navigation">
			<div id="invasalign">
				<nav>
					<a href="javascript:void(0)" class="clickable about mobile">About</a>
					<a href="//openmikeeagle360.bandcamp.com/" target="_blank">Listen</a>
					<a href="//youtube.com/channel/UCDvaK0SNn3RbSUpLnZ-fuYg" target="_blank">Watch</a>
					<a href="javascript:void(0)" class="clickable shop">Shop</a>
					<a href="//mikeeaglestinks.tumblr.com/" target="_blank">Blog</a>
					<a href="javascript:void(0)" class="clickable contact">Contact</a>
				</nav>
				<div id="bottom">
					<a class="social mobile" href="//soundcloud.com/open-mike-eagle">
						<i class="fa fa-soundcloud icon" aria-hidden="true"></i>
					</a>
					<a class="social mobile" href="//open.spotify.com/artist/5CuU6SRJjbbZL926nSGGxX">
						<i class="fa fa-spotify icon" aria-hidden="true"></i>
					</a>
					<a class="social mobile" href="//itunes.apple.com/us/artist/open-mike-eagle/id368967416">
						<i class="fa fa-apple icon" aria-hidden="true"></i>
					</a>
					<a class="social" href="//youtube.com/channel/UCDvaK0SNn3RbSUpLnZ-fuYg" target="_blank">
						<i class="fa fa-youtube" aria-hidden="true"></i>
					</a>
					<hr class="mobile">
					<a class="social" href="//mikeeaglestinks.tumblr.com" target="_blank">
						<i class="fa fa-tumblr" aria-hidden="true"></i>
					</a>
					<a class="social" href="//twitter.com/mike_eagle" target="_blank">
						<i class="fa fa-twitter" aria-hidden="true"></i>
					</a>
					<a class="social" href="//instagram.com/artrapmike" target="_blank">
						<i class="fa fa-instagram" aria-hidden="true"></i>
					</a>
					<a class="social" href="#social" target="_blank">
						<i class="fa fa-facebook" aria-hidden="true"></i>
					</a>
				</div>
				<div class="close mobile">X</div>
			</div>
		</div>
		<!-- Music Icon -->
		<div id="icon-right">
			<i class="fa fa-volume-up icon" aria-hidden="true"></i>
		</div>
		<!-- Music Panel -->
		<div id="music">
			<h2>Music</h2>
			<iframe src="https://open.spotify.com/embed/artist/5CuU6SRJjbbZL926nSGGxX?theme=white" width="300" height="700" frameborder="0" allowtransparency="true"></iframe>
			<hr>
			<div id="platforms">
				<a class="listen" href="//soundcloud.com/open-mike-eagle">
					<i class="fa fa-soundcloud icon" aria-hidden="true"></i>
				</a>
				<a class="listen" href="//open.spotify.com/artist/5CuU6SRJjbbZL926nSGGxX">
					<i class="fa fa-spotify icon" aria-hidden="true"></i>
				</a>
				<a class="listen" href="//itunes.apple.com/us/artist/open-mike-eagle/id368967416">
					<i class="fa fa-apple icon" aria-hidden="true"></i>
				</a>
			</div>
		</div>
		<!-- About Icon -->
		<div id="icon-left">
			<i class="fa fa-info icon" aria-hidden="true"></i>
		</div>
		<!-- About Panel -->
		<div id="about">
			<h2>About</h2>
			<!--
				<canvas id="head"></canvas>
				Replace image with canvas element using the 3D model of Mike's head. Use the #head ID on the canvas element.
			-->
			<img src="//placehold.it/310x430/ffffff/000000&text=3D+Model" id="head" alt="Open Mike Eagle">
			<hr>
			<div id="text">
				<p>A member of California's <a href="//allmusic.com/artist/project-blowed-mn0000364679" target="_blank">Project Blowed</a> collective with a whip-smart sense of humor, rapper <a href="//allmusic.com/artist/open-mike-eagle-mn0002113916" target="_blank">Open Mike Eagle</a> was born Michael Eagle II in Chicago. It was at the Southern Illinois University Carbondale that the aspiring MC became an RA, and after he met <a href="//allmusic.com/artist/hannibal-buress-mn0002463646" target="_blank">Hannibal Buress</a> the resident advisor and student became fast friends. Grad school brought him to the West Coast, where he joined the <a href="//allmusic.com/artist/project-blowed-mn0000364679" target="_blank">Project Blowed</a> collective along with the group <a href="//allmusic.com/artist/thirsty-fish-mn0002003393" target="_blank">Thirsty Fish</a>.</p>
				<p>In 2010 he went solo on Mush Records with <a href="//allmusic.com/album/unapologetic-art-rap-mw0001977562" target="_blank">Unapologetic Art Rap</a>, an album that featured college bud <a href="//allmusic.com/artist/buress-mn0002463646" target="_blank">Buress</a> along with left-field MCs like <a href="//allmusic.com/artist/busdriver-mn0000642728" target="_blank">Busdriver</a> and <a href="//allmusic.com/artist/serengeti-mn0002015792" target="_blank">Serengeti</a>. <a href="//allmusic.com/album/rappers-will-die-of-natural-causes-mw0002499806" target="_blank">Rappers Will Die of Natural Causes</a> followed a year later on the Hellfyre label; then he collaborated with producer <a href="//allmusic.com/artist/awkward-mn0003071560" target="_blank">Awkward</a> and issued <a href="//allmusic.com/album/4nml-hsptl-mw0002370085" target="_blank">4NML HSPTL</a> on Fake Four in 2012.</p>
				<p>The Mello Music group released the aptly titled <a href="//allmusic.com/album/dark-comedy-mw0002678910" target="_blank">Dark Comedy</a> in 2014, the same year that Eagle submitted a track to The Ron and Fez Show, which the satellite radio talk show duo soon picked up as their theme song. He stuck with Mello for 2016's <a href="//allmusic.com/album/hella-personal-film-festival-mw0002912735" target="_blank">Hella Personal Film Festival</a>, an album recorded with U.K. producer <a href="//allmusic.com/artist/paul-white-mn0002141768" target="_blank">Paul White.</a></p>
			</div>
			<div class="close mobile">X</div>
		</div>
		<!-- Contact Panel -->
		<div id="contact">
			<h2>Contact</h2>
			<form method="post" action="//matthewbeckman.co/develop/mike/email.php">
				<input type="text" autocomplete="off" name="Name" id="Name" placeholder="NAME">
				<input type="text" autocomplete="off" name="Email" id="Email" placeholder="EMAIL">
				<input type="text" autocomplete="off" name="Subject" id="Subject" placeholder="SUBJECT">
				<textarea name="Message" autocomplete="off" rows="20" cols="20" id="Message" placeholder="MESSAGE"></textarea>
				<input type="submit" name="submit" value="Send" class="submit">
			</form>
			<p>For booking info please email <a href="mailto:omebooking@gmail.com">omebooking@gmail.com</a>
			<div class="close mobile">X</div>
		</div>
		<!-- Shop / Coming Soon Panel -->
		<div id="coming" class="close">
			<div class="centered">
				<h2>Coming Soon</h2>
			</div>
		</div>
		<div id="loader">
			<div id="indicator">
				<img src="img/200w_d.gif" alt="Mike Eagle" style="display: block; text-align: center; width: 200px; margin: auto;">
				<span id="percent">0%</span>
			</div>
		</div>
		<!-- Load jQuery Library -->
		<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

		<script
		  src="https://code.jquery.com/jquery-3.2.0.min.js"
		  integrity="sha256-JAW99MJVpJBGcbzEuXk4Az05s/XyDdBomFqNlM3ic+I="
		  crossorigin="anonymous"></script>
		<script src="js/interfaceCode.js"></script>
		<script src="js/three.js"></script>
		<script src="js/Tween.js"></script>
		<script src="js/MTLLoader.js"></script>
		<script src="js/OBJLoader.js"></script>
		<script src="js/ColladaLoader.js"></script>
		<script src="js/OrbitControls.js"></script>
		<script src="js/Projector.js"></script>
		<script src="js/SkyShader.js"></script>
		<script src="js/dat.gui.min.js"></script>
		
		<script>
			(function(){var script=document.createElement('script');script.onload=function(){var stats=new Stats();document.body.appendChild(stats.dom);requestAnimationFrame(function loop(){stats.update();requestAnimationFrame(loop)});};script.src='http://rawgit.com/mrdoob/stats.js/master/build/stats.min.js';document.head.appendChild(script);})()

			var camera, scene, renderer;
			var mtlLoader, objects, ambientLight, controls;
			var floor, floorMat, floorGeo;
			var onProgress, onError;
			var update, render, GameLoop;
			var raycaster, mouse, INTERSECTED;
			var setMaterial;

			var sky, sunSphere;

			var colorHash = {};
			
			var gui;
			
			
			scene = new THREE.Scene();
			scene.fog = new THREE.FogExp2( 0x333333, 0.0009);

			camera = new THREE.PerspectiveCamera(75,window.innerWidth/window.innerHeight, 0.1, 2000000);

			renderer = new THREE.WebGLRenderer({
				canvas: city,
				antialias: false
			});
			//renderer.setClearColor(0xFFFFFF);
			renderer.setPixelRatio(window.devicePixelRatio*.75);
			renderer.setSize(window.innerWidth, window.innerHeight);
			renderer.shadowMap.enabled = true;
			// renderer.shadowMap.type = THREE.PCFSoftShadowMap;
			renderer.shadowMap.type = THREE.PCFSoftShadowMap;
			
			
			floorMat = new THREE.MeshBasicMaterial({
				color: 0xFFFFFF,
				side: THREE.DoubleSide
			});
			floorGeo = new THREE.PlaneGeometry(2000,2000,10,10);
			floor = new THREE.Mesh(floorGeo, floorMat);
			floor.position.y = -0.5;
			floor.rotation.x = Math.PI / 2;
			//scene.add(floor);

			ambientLight = new THREE.AmbientLight( 0xFFFFFF, 0.75 );
			
			scene.add( ambientLight)
		
			
			var spotLight = new THREE.SpotLight( '0xfwc97e' );

			spotLight.position.x = 26;
			spotLight.position.y = 256;
			spotLight.position.z = 109;
			spotLight.intensity = 0.7;
			spotLight.distance = 0;
			spotLight.angle = 1;
			spotLight.penumbra = 0.36;
			spotLight.decay = 1;

			spotLight.castShadow = true;

			spotLight.shadow.mapSize.width = 1024;  // default
			spotLight.shadow.mapSize.height = 1024; // default
			spotLight.shadow.camera.near = 0.5;       // default
			spotLight.shadow.camera.far = 500;      // default
			
				
				
			// 				var helper = new THREE.CameraHelper( spotLight.shadow.camera );
			// scene.add( helper );

			scene.add( spotLight );	
						
			var loader = new THREE.ColladaLoader();
			var intersectable = [];
			var percentage = document.getElementById("percent");
			var loadingScreen = document.getElementById("loader");
			loader.load(
				// resource URL
				'models/LOWPOLYLAND.dae',
				// Function when resource is loaded
				function ( collada ) {
					percentage.innerHTML = '100%';
					loadingScreen.style.display = 'none';
					dae = collada.scene
					dae.traverse( function(child) {
						child.castShadow = true;
						child.receiveShadow = true;
						if(child.name.indexOf('s_') == 0){
							child.userData = { 
								hovered: false, 
								elevated: false, 
								baseY: child.position.y 
							};
							intersectable.push(child)
						}
						if( child.material ) {
				      	  child.material.side = THREE.DoubleSide;
						}
					});
					scene.add( dae );
				},
				// Function called when download progresses
				function ( xhr ) {
					var p = xhr.loaded / xhr.total * 100;
					percentage.innerHTML = Math.round(p) + '%';
					if (p > 50) {
						
					}
				}
			);

			function initSky() {

				// Add Sky Mesh
				sky = new THREE.Sky();
				scene.add( sky.mesh );

				// Add Sun Helper
				sunSphere = new THREE.Mesh(
					new THREE.SphereBufferGeometry( 20000, 16, 8 ),
					new THREE.MeshBasicMaterial( { color: 0xffffff } )
				);
				sunSphere.position.y = - 700000;
				sunSphere.visible = false;
				scene.add( sunSphere );

				/// GUI

				var effectController  = {
					turbidity: 10.4,
					rayleigh: 1.899,
					mieCoefficient: 0.005,
					mieDirectionalG: 0.323,
					luminance: 0.2,
					inclination: 0.42472, // elevation / inclination
					azimuth: 0.4657, // Facing front,
					sun: ! true
				};

				var distance = 400000;

				function guiChanged() {

					var uniforms = sky.uniforms;
					uniforms.turbidity.value = effectController.turbidity;
					uniforms.rayleigh.value = effectController.rayleigh;
					uniforms.luminance.value = effectController.luminance;
					uniforms.mieCoefficient.value = effectController.mieCoefficient;
					uniforms.mieDirectionalG.value = effectController.mieDirectionalG;

					var theta = Math.PI * ( effectController.inclination - 0.5 );
					var phi = 2 * Math.PI * ( effectController.azimuth - 0.5 );

					sunSphere.position.x = distance * Math.cos( phi );
					sunSphere.position.y = distance * Math.sin( phi ) * Math.sin( theta );
					sunSphere.position.z = distance * Math.sin( phi ) * Math.cos( theta );

					sunSphere.visible = effectController.sun;

					sky.uniforms.sunPosition.value.copy( sunSphere.position );

					renderer.render( scene, camera );

				}

				guiChanged();
			}
			
			//scene.add( ambientLight );

			document.body.appendChild(renderer.domElement);

			window.addEventListener('resize', function() {
				var width = window.innerWidth;
				var height = window.innerHeight;
				renderer.setSize(width, height);
				camera.aspect = width / height;
				camera.updateProjectionMatrix();
			})

			camera.position.z = 360;
			camera.position.x = 0;
			camera.position.y = 40;
			camera.lookAt(new THREE.Vector3())
			controls = new THREE.OrbitControls(camera,renderer.domElement);
			
			
			// new TWEEN.Tween( camera.position ).to( {
			// 						x: 0,
			// 						y: 20,
			// 						z: 120}, 4000 )
			// 					.easing( TWEEN.Easing.Quadratic.Out).start();


						
						
			// new TWEEN.Tween( controls.target ).to( {
			// 				x: 0,
			// 				y: 100,
			// 				z: 0}, 4000 )
			// 				.easing( TWEEN.Easing.Quadratic.Out).start();



			initSky();
			

			raycaster = new THREE.Raycaster();
			mouse = new THREE.Vector2();

			function onMouseMove( event ) {

				// calculate mouse position in normalized device coordinates
				// (-1 to +1) for both components

				mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
				mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
			}
			
			function setMaterial(object, hex) {
				var t = object.material.type.toString();

				if (hex == null) {
				
				colors = colorHash[INTERSECTED.uuid]
				if (t.localeCompare("MultiMaterial") == 0 ) {
						for (i = 0; i < object.material.materials.length; i++) {
							object.material.materials[i].color.setHex(colors[i]);
						}
					}
					else{
						object.material.color.setHex(colors[0]);
					}
				}
				else if (t.localeCompare("MultiMaterial") == 0 ) {
					var materials = object.material.materials
					colorHash[object.uuid] = materials.map(function(obj) { 
					
						return obj.color.getHex()
					});
					object.material.materials = materials.map(function(obj) { 
						var newObj = obj
						newObj.color.setHex(hex)
						return newObj
					});

				}
				else {
					colorHash[object.uuid] = [object.material.color.getHex()];
					object.material.color.setHex(hex)
				}
			}
			
			
			


			update = function() {
			}
			

			var textElement = document.getElementById('helper_text')
			
			var bounce = function(obj, point) {
						textElement.className = "display--flex";
						document.body.style.cursor = "pointer";
							if ( obj.name === 's_SPOTIFY' ) {
	 							textElement.innerHTML = "<span>LISTEN</span>";
	 						} else if ( obj.name === 's_CONTACT' ) {
	 							textElement.innerHTML = "<span>CONTACT</span>";
	 						} else if ( obj.name === 's_SOCIAL_MEDIA' ) {
	 							textElement.innerHTML = "<span>BLOG</span>";
	 						} else if ( obj.name === 's_YOUTUBE' ) {
	 							textElement.innerHTML = "<span>WATCH</span>";
	 						} else if ( obj.name === 's_YOUTUBE_LINK' ) {
	 							textElement.innerHTML = '<span><img src="img/wrestling-mask.png"></span>';
	 						} else if ( obj.name === 's_STORE' ) {
	 							textElement.innerHTML = "<span>SHOP</span>";
	 						} 

	 							//obj.parent.userData.hovered = true
								new TWEEN.Tween( obj.position ).to( { y: [point] }, 400 )
								.easing( TWEEN.Easing.Quadratic.Out)
								.onComplete(function() {
									obj.userData.elevated = true
								})
								.start();
							
						};

			var bounceDown = function(obj) {
						document.body.style.cursor = "default";
						 	textElement.className = "";
							obj.userData.elevated = false
							new TWEEN.Tween( obj.position ).to( { y: [obj.userData.baseY] }, 1000 )
							.easing( TWEEN.Easing.Quadratic.Out)
							.onComplete(function() {
								 
							})
							.start();
						};
			render = function() {
			
			
				TWEEN.update();
				// update the picking ray with the camera and mouse position
				raycaster.setFromCamera( mouse, camera );

				// calculate objects intersecting the picking ray
				var intersects = raycaster.intersectObjects( intersectable, true );
				
				for (i in intersectable) {
					var obj = intersectable[i]
					obj.userData.hovered = false
				}
				
				var y = 0;
				if ( intersects.length > 0 ) {

				// console.log(intersects[0])
					
					if ( INTERSECTED != intersects[ 0 ].object ) {
						//if (INTERSECTED) setMaterial( INTERSECTED, INTERSECTED.currentHex )
						INTERSECTED = intersects[ 0 ].object;
						y = intersects[ 0 ].point.y
 						INTERSECTED.parent.userData.hovered = true;
 						
						
					}
				} else {
					INTERSECTED = null;
					for (i in intersectable) {
				
					var obj = intersectable[i];
					if( obj.userData.elevated == true){
						bounceDown(obj);
					}
					}
				}

				for (i in intersectable) {
					var obj = intersectable[i];
					if (obj.userData.hovered == true) {
						if ( obj.name === 'S_MERRY' ) {
 							textElement.innerHTML = " ";
 							new TWEEN.Tween( obj.rotation ).to( { y: "+1000" }, 500 )
 							.easing( TWEEN.Easing.Quadratic.Out)
							.onComplete(function() {
								obj.userData.elevated = true
							})
							.start();
 						} else {
 							bounce(obj, 600);
 						}
					}
					else if (INTERSECTED != null && obj.userData.hovered == false && obj.userData.elevated == true && obj != INTERSECTED.parent) { 
						bounceDown(obj)
					}
				}

				renderer.render(scene, camera);
			}

			GameLoop = function() {
				requestAnimationFrame( GameLoop );
				update();
				render();
			}

			window.addEventListener( 'mousemove', onMouseMove, false );
			GameLoop();
			

		</script>